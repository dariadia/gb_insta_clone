(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={index:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="../";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"077b":function(t,e,a){"use strict";var n=a("f777"),r=a.n(n);r.a},"2e40":function(t,e,a){"use strict";var n=a("41aa"),r=a.n(n);r.a},"385b":function(t,e,a){},"3d44":function(t,e,a){},"3f84":function(t,e,a){},"3faa":function(t,e,a){},"41aa":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,r,s,i,o=a("2b0e"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a(t.layout,{tag:"component"},[a("router-view")],1)],1)},l=[],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("header-component"),a("div",{staticClass:"page__body"},[a("router-view")],1),a("footer-component")],1)},d=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header"},[a("div",{staticClass:"container"},[a("logo"),a("search-button"),a("account-control")],1)])},f=[],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"logo",attrs:{to:{name:"Home"}}},[t._v("GeekGram")])},v=[],h=(a("a638"),a("2877")),g={},b=Object(h["a"])(g,p,v,!1,null,null,null),_=b.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search__button"},[a("div",{staticClass:"button"},[t.isActive?a("div",{staticClass:"search__group flex items_center"},[a("i",{staticClass:"material-icons"},[t._v("search")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchString,expression:"searchString"}],staticClass:"search_input",attrs:{type:"text",placeholder:"Find"},domProps:{value:t.searchString},on:{change:t.handleChange,input:function(e){e.target.composing||(t.searchString=e.target.value)}}}),a("i",{staticClass:"material-icons",on:{click:t.handleClearSearch}},[t._v("cancel")])]):a("div",{staticClass:"search__group flex items_center content_center",on:{click:t.toggle}},[t._v(" Search ")])])])},w=[],y=a("2f62"),O=(a("b054"),a("7db0"),a("dca8"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("1276"),a("96cf"),a("1da1")),k=a("ade3"),j=a("5530"),x=(a("99af"),a("d4ec")),E=a("bee2"),S=a("2caf"),L=a("262e"),P=a("bc3a"),R=a.n(P),T=(a("4de4"),a("13d5"),a("a9e3"),a("4fad"),a("3835")),I="",$=function(){function t(){Object(x["a"])(this,t),Object(k["a"])(this,"_token",null)}return Object(E["a"])(t,[{key:"setToken",value:function(t){return this._token=t,R.a.defaults.headers.common["Authorization"]="Bearer ".concat(t),this}},{key:"getToken",value:function(){return this._token}},{key:"buildQueryParams",value:function(t){var e=Object.entries(t);return e?e.reduce((function(t,e,a){var n=Object(T["a"])(e,2),r=n[0],s=n[1],i=a?"&":"?";return s?t+"".concat(i).concat(r,"=").concat(s):t}),I):I}},{key:"buildYiiQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t.filter,n=t.query,r=Object(j["a"])({},a,{expand:e},n);return this.buildQueryParams(r)}}],[{key:"getBaseUrl",value:function(){return"http://localhost/"}},{key:"parseHeaders",value:function(t){return t?{currentPage:Number(t["x-pagination-current-page"]),limit:Number(t["x-pagination-per-page"]),pagesCount:Number(t["x-pagination-page-count"]),totalItems:Number(t["x-pagination-total-count"])}:{}}}]),t}(),G=function(t){Object(L["a"])(a,t);var e=Object(S["a"])(a);function a(){return Object(x["a"])(this,a),e.apply(this,arguments)}return Object(E["a"])(a,[{key:"login",value:function(t,e){var a=btoa("".concat(t,":").concat(e)),n={auth:a};return R.a.post("".concat($.getBaseUrl(),"v1/auth/login"),n).then((function(t){return t}))["catch"]((function(t){return console.warn(t)}))}},{key:"register",value:function(t){return R.a.post("".concat($.getBaseUrl(),"v1/auth"),t).then((function(t){return t}))["catch"]((function(t){return console.warn(t)}))}},{key:"getProfile",value:function(){return R.a.post("".concat($.getBaseUrl(),"v1/profile/get")).then((function(t){return t}))["catch"]((function(t){return console.warn(t)}))}}]),a}($),H=new G,F="INIT",M="LOGIN_ACTION",D="LOGIN_ACTION_SUCCESS",B="LOGIN_ACTION_ERROR",N="LOGOUT_ACTION",A="SEARCH_QUERY_CHANGE",U="CLEAR_SEARCH_STRING",Y="REGISTER_ACTION",z="REGISTER_SUCCESS",Q="REGISTER_ERROR",V="GET_PROFILE",q="GET_PROFILE_SUCCESS",J="GET_PROFILE_ERROR",W=function(){return ut({type:V,payload:{}})},Z="token",K=Object.freeze({login:null,token:null,isGuest:!0,isFetching:!1,searchString:null,errors:[],personalData:Object.freeze({userStatistics:null})}),X={state:Object(j["a"])({},K),getters:{isGuest:function(t){var e=t.isGuest;return e},personalData:function(t){var e=t.personalData;return e},searchString:function(t){var e=t.searchString;return e},token:function(t){var e=t.token;return e}},setters:{},mutations:(n={},Object(k["a"])(n,F,(function(t,e){e&&(t.isGuest=!1,t.token=e)})),Object(k["a"])(n,N,(function(t){t.isGuest=K.isGuest,document.cookie="token="})),Object(k["a"])(n,A,(function(t,e){return t.searchString=e})),Object(k["a"])(n,U,(function(t){return t.searchString=K.searchString})),Object(k["a"])(n,z,(function(t,e){var a=e.token;t.token=a})),Object(k["a"])(n,Q,(function(t,e){t.errors.push(e)})),Object(k["a"])(n,D,(function(t,e){t.token=e,t.isGuest=!1,document.cookie="token=".concat(e)})),Object(k["a"])(n,B,(function(t){t.errors.push("invalid login or password")})),Object(k["a"])(n,q,(function(t,e){t.personalData=Object(j["a"])({},t.personalData,{},e)})),Object(k["a"])(n,J,(function(t){t.errors.push("cant get profile")})),n),actions:(r={},Object(k["a"])(r,F,(function(t){var e=t.commit,a=null,n=document.cookie.split(";"),r=n.find((function(t){return t.match(RegExp(Z))}));if(r){var s=r.split("=");a=s[1]}return e(F,a),H.setToken(a),W()})),Object(k["a"])(r,M,function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=a.username,s=a.password,t.next=4,H.login(r,s);case 4:if(i=t.sent,!i||200!==i.status){t.next=7;break}return t.abrupt("return",n(D,i.data));case 7:return t.abrupt("return",n(B));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),Object(k["a"])(r,N,(function(t){var e=t.commit;return e(N)})),Object(k["a"])(r,A,(function(t,e){var a=t.commit;return a(A,e.searchString)})),Object(k["a"])(r,U,(function(t){var e=t.commit;return e(U)})),Object(k["a"])(r,Y,function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=a.data,t.next=4,H.register(r);case 4:if(s=t.sent,!s||200!==s.status){t.next=7;break}return t.abrupt("return",n(z,s));case 7:return t.abrupt("return",n(Q));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),Object(k["a"])(r,V,function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,H.getProfile(a.token);case 3:if(r=t.sent,s=r.status,i=r.data,!s||200!==s){t.next=8;break}return t.abrupt("return",n(q,i));case 8:return t.abrupt("return",n(J));case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),r)},tt=a("2909"),et="SET_MEDIA_REQUEST_DATE",at="SET_MEDIA_REQUEST_VIEW",nt=function(t){Object(L["a"])(a,t);var e=Object(S["a"])(a);function a(){return Object(x["a"])(this,a),e.apply(this,arguments)}return Object(E["a"])(a,[{key:"extraFields",value:function(){return["name","username","src","type","comments","likes"]}},{key:"getMediaList",value:function(t){return R.a.get("".concat($.getBaseUrl(),"v1/media").concat(this.buildYiiQuery(t,["name","username","src","type","likes"]))).then((function(t){return t}))["catch"]((function(t){return console.warn(t)}))}},{key:"getMediaItem",value:function(t){return R.a.get("".concat($.getBaseUrl(),"v1/media").concat(this.buildYiiQuery(t,this.extraFields()))).then((function(t){return t}))["catch"]((function(t){return console.warn(t)}))}}]),a}($),rt=new nt,st=Object.freeze,it=st({mediaList:[],mediaItem:{},mediaHeaders:[]}),ot={state:Object(j["a"])({},it),getters:{mediaList:function(t){var e=t.mediaList;return e},mediaItem:function(t){var e=t.mediaItem;return e},mediaHeaders:function(t){var e=t.mediaHeaders;return e}},setters:{},mutations:(s={},Object(k["a"])(s,et,(function(t,e){var a=e||{},n=a.headers,r=a.data,s=r||it.mediaList;t.mediaHeaders=$.parseHeaders(n);var i,o=t.mediaHeaders.currentPage;1===o?t.mediaList=s:(i=t.mediaList).push.apply(i,Object(tt["a"])(s))})),Object(k["a"])(s,at,(function(t,e){var a=e||{},n=a.headers,r=a.data;t.mediaItem=r.length?r[r.length-1]:it.mediaItem,t.mediaHeaders=$.parseHeaders(n)})),s),actions:(i={},Object(k["a"])(i,et,function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e,a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,rt.getMediaList(a);case 3:r=t.sent,n(et,r);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),Object(k["a"])(i,at,function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e,a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,rt.getMediaItem(a);case 3:r=t.sent,n(at,r);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),i)};o["a"].use(y["a"]);var ct=[];var lt=new y["a"].Store({modules:{UserModule:X,MediaModule:ot},plugins:ct}),ut=function(t){var e=t.type,a=t.payload;return lt.dispatch(e,a)},dt=lt,mt=function(){return ut({type:U,payload:{}})},ft=function(t){return ut({type:A,payload:{searchString:t}})},pt={data:function(){return{isActive:!1,searchString:this.$store.getters["searchString"]}},methods:{toggle:function(){this.isActive=!this.isActive},handleChange:function(t){var e=t.target.value;ft(e)},handleClearSearch:function(){mt(),this.toggle()}}},vt=pt,ht=(a("d69f"),Object(h["a"])(vt,C,w,!1,null,"dc5511aa",null)),gt=ht.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accout__control"},[t.isGuest?a("div",{staticClass:"guest__buttons"},[a("button",{staticClass:"waves-effect waves-light btn-small",on:{click:function(e){t.modalBody=t.loginForm}}},[t._v("Login")]),a("button",{staticClass:"btn-flat",on:{click:function(e){t.modalBody=t.registerForm}}},[t._v("Register")])]):t._e(),t.isGuest?t._e():a("div",{staticClass:"user__buttons"},[a("button",{staticClass:"waves-effect waves-red btn-small red lighten-2",on:{click:t.logout}},[a("i",{staticClass:"material-icons"},[t._v("exit_to_app")])])]),a("modal",{attrs:{show:Boolean(t.modalBody),closeHandler:t.handleCloseModal}},[a(t.getModalBodyComponent,{tag:"component",attrs:{onClose:t.handleCloseModal}})],1)],1)},_t=[],Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",[a("div",{staticClass:"modal_overflow"}),a("div",{staticClass:"modal__window show"},[t.closeHandler?a("div",{staticClass:"button_close",on:{click:t.closeHandler}},[a("i",{staticClass:"icon material-icons"},[t._v("close")])]):t._e(),a("div",{staticClass:"modal__body"},[t._t("default")],2)])]):t._e()},wt=[],yt={name:"modal_window",props:{show:Boolean,closeHandler:Function},data:function(){return{modalVisible:this.show}}},Ot=yt,kt=(a("b49e"),Object(h["a"])(Ot,Ct,wt,!1,null,"4ebbb43e",null)),jt=kt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login__form"},[a("h5",{staticClass:"form_header"},[t._v("Авторизация")]),a("div",{staticClass:"row"},[a("form",{staticClass:"col s12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],class:"validate "+t.validate(t.username),attrs:{id:"username",type:"text",autocomplete:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),a("label",{attrs:{for:"username"}},[t._v("Логин")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],class:"validate "+t.validate(t.password),attrs:{id:"password",type:"password",autocomplete:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),a("label",{attrs:{for:"password"}},[t._v("Пароль")])])])])]),a("div",{staticClass:"buttons"},[a("button",{staticClass:"waves-effect waves-light btn",attrs:{disabled:!t.password||!t.username},on:{click:t.doLogin}},[t._v("Войти")]),a("button",{staticClass:"waves-effect waves-light btn red",on:{click:t.onClose}},[t._v("Отмена")])])])},Et=[],St=function(t,e){return ut({type:M,payload:{username:t,password:e}})},Lt={name:"LoginForm",props:{onClose:Function},data:function(){return{isValid:!0,username:null,password:null}},methods:{doLogin:function(){this.username&&this.password?(St(this.username,this.password),this.onClose()):this.isValid=!1},validate:function(t){return this.isValid?"default":t?"valid":"invalid"}}},Pt=Lt,Rt=(a("85f5"),Object(h["a"])(Pt,xt,Et,!1,null,"e11ed2fc",null)),Tt=Rt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login__form"},[a("h5",{staticClass:"form_header"},[t._v("Регистрация")]),a("div",{staticClass:"row"},[a("form",{staticClass:"col s12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],class:"validate "+t.validate(t.username),attrs:{id:"username",type:"text",autocomplete:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),a("label",{attrs:{for:"username"}},[t._v("Логин")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],class:"validate "+t.validate(t.password),attrs:{id:"password",type:"password",autocomplete:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),a("label",{attrs:{for:"password"}},[t._v("Пароль")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],class:"validate "+t.validate(t.email),attrs:{id:"email",type:"email",autocomplete:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("label",{attrs:{for:"email"}},[t._v("Email")])])])])]),a("div",{staticClass:"buttons"},[a("button",{staticClass:"waves-effect waves-light btn",on:{click:t.doRegister}},[t._v("Зарегистрироватся")]),a("button",{staticClass:"waves-effect waves-light btn red",on:{click:t.onClose}},[t._v("Отмена")])])])},$t=[],Gt=function(t){return ut({type:Y,payload:t})},Ht={name:"RegisterForm",props:{onClose:Function},data:function(){return{isValid:!0,username:null,password:null,email:null}},methods:{doRegister:function(){this.username&&this.password&&this.email?(Gt(this.$data),this.onClose()):this.isValid=!1},validate:function(t){return this.isValid?"default":t?"valid":"invalid"}}},Ft=Ht,Mt=(a("d77f"),Object(h["a"])(Ft,It,$t,!1,null,"25ebe280",null)),Dt=Mt.exports,Bt=function(){return ut({type:N})},Nt={data:function(){return{loginForm:Tt,registerForm:Dt,modalBody:null}},computed:{isGuest:function(){return this.$store.getters["isGuest"]},getModalBodyComponent:function(){return this.modalBody}},methods:{logout:Bt,handleCloseModal:function(){this.modalBody=null}},components:{Modal:jt}},At=Nt,Ut=(a("6679"),Object(h["a"])(At,bt,_t,!1,null,null,null)),Yt=Ut.exports,zt={name:"HeaderComponent",components:{Logo:_,SearchButton:gt,AccountControl:Yt}},Qt=zt,Vt=(a("aad4"),Object(h["a"])(Qt,m,f,!1,null,null,null)),qt=Vt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"container"},[a("ul",{staticClass:"info__links"},t._l(t.links,(function(e){return a("li",{key:"link#"+e.id},[a("a",{staticClass:"link",attrs:{href:e.href}},[t._v(t._s(e.label))])])})),0),a("span",[t._v("© GeekGram "+t._s(t.getCurrentYear))])])])},Wt=[],Zt=(a("0d03"),{data:function(){return{links:[{id:1,label:"link1",href:"#"},{id:2,label:"link2",href:"#"},{id:3,label:"link3",href:"#"}]}},name:"FooterComponent",components:{},computed:{getCurrentYear:function(){return(new Date).getFullYear()}}}),Kt=Zt,Xt=(a("8bae"),Object(h["a"])(Kt,Jt,Wt,!1,null,null,null)),te=Xt.exports,ee={name:"MainLayout.vue",components:{HeaderComponent:qt,FooterComponent:te}},ae=ee,ne=(a("d4b5"),Object(h["a"])(ae,u,d,!1,null,null,null)),re=ne.exports,se=(a("6885"),function(){return ut({type:F,payload:{}})}),ie={mounted:function(){se()},computed:{layout:function(){return"main-layout"}},components:{MainLayout:re}},oe=ie,ce=(a("5c0b"),Object(h["a"])(oe,c,l,!1,null,null,null)),le=ce.exports,ue=a("8c4f"),de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("home")},me=[],fe=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},pe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"greetings"},[a("img",{staticClass:"greetings-image",attrs:{src:"/static/iphone.jpg",alt:"Mobile"}}),a("div",{staticClass:"greetings-title"},[a("p",[t._v("Привет, это главная страница приложения GeekGram!")]),a("p",[t._v("Чтобы использовать приложение, необходимо зарегистрироваться и войти в свой аккаунт")])])])])}],ve=(a("afb4"),{}),he=Object(h["a"])(ve,fe,pe,!1,null,"29688c70",null),ge=he.exports,be={components:{Home:ge}},_e=be,Ce=Object(h["a"])(_e,de,me,!1,null,null,null),we=Ce.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("user")},Oe=[],ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t.username?a("div",{staticClass:"content"},[t.mediaList&&t.mediaList.length?a("div",{staticClass:"post__container"},t._l(t.mediaList,(function(t){return a("post-preview",{key:"media#"+t.id,attrs:{media:t}})})),1):t._e(),t.loading||t.mediaList&&t.mediaList.length?t._e():a("h3",[t._v(" У вас нет записей. ")]),t.loading?a("preloader",{attrs:{size:"big"}}):t._e()],1):t._e()])},je=[],xe=(a("4795"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"preloader__container"},[a("div",{class:"preloader-wrapper "+t.size+" active"},[t._m(0)])])}),Ee=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-layer spinner-green-only"},[a("div",{staticClass:"circle-clipper left"},[a("div",{staticClass:"circle"})]),a("div",{staticClass:"gap-patch"},[a("div",{staticClass:"circle"})]),a("div",{staticClass:"circle-clipper right"},[a("div",{staticClass:"circle"})])])}],Se={props:{size:String},name:"Preloader"},Le=Se,Pe=(a("bde4"),Object(h["a"])(Le,xe,Ee,!1,null,"b58e2b88",null)),Re=Pe.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"post post__preview",attrs:{to:{name:"Post",params:{id:t.media.id}}}},[a("div",{staticClass:"post__preview-media"},["image"===t.media.type?a("img",{staticClass:"post__preview-image",attrs:{src:t.media.src,alt:t.media.body}}):a("video",{staticClass:"post__preview-video",attrs:{controls:""}},[a("source",{attrs:{src:t.media.src,type:"video/mp4"}}),t._v(" Your browser does not support HTML5 video. ")])]),a("div",{staticClass:"post__preview-content"},[a("div",{staticClass:"post__preview-likes"},[a("font-awesome-icon",{attrs:{icon:["fas","heart"]}}),t._v(" "+t._s(t.media.likes)+" likes ")],1)])])},Ie=[],$e={name:"Media",props:{media:Object},methods:{getDate:function(t){var e=new Date(t);return new Intl.DateTimeFormat("ru-RU").format(e)}}},Ge=$e,He=(a("fb4c"),Object(h["a"])(Ge,Te,Ie,!1,null,"d98a1fb2",null)),Fe=He.exports,Me=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id";return ut({type:et,payload:{filter:{username:t},query:{sort:n,page:e,"per-page":a}}})},De={data:function(){return{loading:!1,username:null,postsPerPage:6,scrollOffset:300}},computed:{getFullPath:function(){return this.$route.path},mediaList:function(){return this.$store.getters["mediaList"]}},watch:{getFullPath:function(){this.getData()}},created:function(){window.addEventListener("scroll",this.infinityScroll)},destroyed:function(){window.removeEventListener("scroll",this.infinityScroll)},methods:{getData:function(){this.username=this.$route.params.username,this.handlerToggleLoading(),this.username&&Me(this.username,0,this.postsPerPage).then(this.handlerToggleLoading)},infinityScroll:function(){var t=this,e=document.querySelector("body").scrollHeight,a=window.screen.height,n=window.scrollY>=e-a-this.scrollOffset,r=this.$store.getters["mediaHeaders"],s=r.currentPage,i=r.pagesCount;n&&!this.loading&&s<i&&(this.handlerToggleLoading(),setTimeout((function(){Me(t.username,s,t.postsPerPage).then(t.handlerToggleLoading)}),1e3))},handlerToggleLoading:function(){this.loading=!this.loading}},mounted:function(){this.getData()},components:{Preloader:Re,PostPreview:Fe}},Be=De,Ne=(a("8f0b"),Object(h["a"])(Be,ke,je,!1,null,"e973a41a",null)),Ae=Ne.exports,Ue={components:{User:Ae}},Ye=Ue,ze=Object(h["a"])(Ye,ye,Oe,!1,null,null,null),Qe=ze.exports,Ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t.loading?a("preloader",{attrs:{size:"big"}}):t._e(),t.mediaItem?a("div",{staticClass:"media-container"},[a("post",{attrs:{media:t.mediaItem}})],1):a("h3",[t._v("Такой записи не существует")])],1)},qe=[],Je=(a("b64b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"media"},[a("div",{staticClass:"media-header"},[a("router-link",{staticClass:"media-username",attrs:{to:{name:"User",params:{username:t.media.username}}}},[t._v(" "+t._s(t.media.name)+" ")])],1),a("div",{staticClass:"media-body"},["image"===t.media.type?a("img",{staticClass:"media-image",attrs:{src:t.media.src,alt:t.media.body}}):a("video",{staticClass:"media-video",attrs:{controls:""}},[a("source",{attrs:{src:t.media.src,type:"video/mp4"}}),t._v(" Your browser does not support HTML5 video. ")])]),a("div",{staticClass:"media-content"},[a("div",{staticClass:"media-info"},[a("div",{staticClass:"media-likes",on:{click:t.like}},[a("font-awesome-icon",{attrs:{icon:["fas","heart"]}}),t._v(" "+t._s(t.media.likes)+" likes ")],1),a("div",{staticClass:"media-date"},[t._v(t._s(t.getDate(t.media.created_at)))])]),a("div",{staticClass:"media-caption"},[t._v(" "+t._s(t.media.body)+" ")]),t.media.comments&&t.media.comments.length?a("div",{staticClass:"media-comments"}):t._e()])])}),We=[],Ze={name:"Post",props:{media:Object},methods:{like:function(){this.media.hasBeenLiked?this.media.likes--:this.media.likes++,this.media.hasBeenLiked=!this.media.hasBeenLiked},getDate:function(t){var e=new Date(t);return new Intl.DateTimeFormat("ru-RU").format(e)}}},Ke=Ze,Xe=(a("90e2"),Object(h["a"])(Ke,Je,We,!1,null,"50e26237",null)),ta=Xe.exports,ea=function(t){return ut({type:at,payload:{filter:{id:t},query:{}}})},aa={data:function(){return{loading:!1,id:null}},computed:{getFullPath:function(){return this.$route.path},mediaItem:function(){var t=this.$store.getters["mediaItem"];return Object.keys(t).length?t:null}},watch:{getFullPath:function(){this.getData()}},methods:{getData:function(){this.id=this.$route.params.id,this.handlerToggleLoading(),this.id&&ea(this.id).then(this.handlerToggleLoading)},handlerToggleLoading:function(){this.loading=!this.loading}},mounted:function(){this.getData()},components:{Preloader:Re,Post:ta}},na=aa,ra=(a("2e40"),Object(h["a"])(na,Ve,qe,!1,null,"9170d704",null)),sa=ra.exports,ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"page-not-found"},[a("h3",[t._v("404")]),a("p",[t._v("Страница не найдена")]),a("router-link",{staticClass:"link__404",attrs:{to:{name:"Home"}}},[t._v("На главную")])],1)])},oa=[],ca=(a("077b"),{}),la=Object(h["a"])(ca,ia,oa,!1,null,null,null),ua=la.exports;o["a"].use(ue["a"]);var da=[{path:"/",name:"Home",component:we},{path:"/:username([a-zA-Z]+)",name:"User",component:Qe},{path:"/p/:id(\\d+)",name:"Post",component:sa},{path:"*",component:ua}],ma=new ue["a"]({mode:"history",routes:da}),fa=ma,pa=a("ecee"),va=a("c074"),ha=a("ad3d");o["a"].config.productionTip=!1,pa["c"].add(va["a"]),o["a"].component("font-awesome-icon",ha["a"]);var ga={router:fa,store:dt,render:function(t){return t(le)}};new o["a"](ga).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),r=a.n(n);r.a},"5def":function(t,e,a){},"61bd":function(t,e,a){},6679:function(t,e,a){"use strict";var n=a("b537"),r=a.n(n);r.a},"71d4":function(t,e,a){},"85f5":function(t,e,a){"use strict";var n=a("61bd"),r=a.n(n);r.a},"8bae":function(t,e,a){"use strict";var n=a("385b"),r=a.n(n);r.a},"8f0b":function(t,e,a){"use strict";var n=a("f641"),r=a.n(n);r.a},"90e2":function(t,e,a){"use strict";var n=a("a831"),r=a.n(n);r.a},"99e5":function(t,e,a){},"9c0c":function(t,e,a){},"9f93":function(t,e,a){},a638:function(t,e,a){"use strict";var n=a("71d4"),r=a.n(n);r.a},a831:function(t,e,a){},aad4:function(t,e,a){"use strict";var n=a("5def"),r=a.n(n);r.a},afb4:function(t,e,a){"use strict";var n=a("9f93"),r=a.n(n);r.a},b49e:function(t,e,a){"use strict";var n=a("3faa"),r=a.n(n);r.a},b537:function(t,e,a){},bde4:function(t,e,a){"use strict";var n=a("3f84"),r=a.n(n);r.a},d4b5:function(t,e,a){"use strict";var n=a("3d44"),r=a.n(n);r.a},d69f:function(t,e,a){"use strict";var n=a("d821"),r=a.n(n);r.a},d77f:function(t,e,a){"use strict";var n=a("99e5"),r=a.n(n);r.a},d821:function(t,e,a){},e95b:function(t,e,a){},f641:function(t,e,a){},f777:function(t,e,a){},fb4c:function(t,e,a){"use strict";var n=a("e95b"),r=a.n(n);r.a}});
//# sourceMappingURL=index.js.map